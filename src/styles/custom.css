/* ===========================
   ChatGPT ブルー基調トークン
   =========================== */

:root {
  --sl-color-accent: #0d7df2;         /* メイン青 */
  --sl-color-accent-soft: #e8f3ff;    /* とても薄い青 */
  --sl-color-accent-strong: #0a5fcc;  /* 強調青 */

  --sl-color-bg: #f3f4f6;             /* ChatGPT風の薄グレー背景 */
  --sl-color-surface: #ffffff;        /* カード色 */
  --sl-color-border: #e5e7eb;

  --sl-color-text-main: #111827;
  --sl-color-text-muted: #6b7280;
  --sl-color-text-subtle: #9ca3af;

  --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.05);
  --shadow-md: 0 4px 12px rgba(15, 23, 42, 0.08);
}

/* ダークモード - ChatGPT青をそのまま暗背景に合わせて調整 */
:root[data-theme='dark'] {
  --sl-color-accent: #3ea8ff;
  --sl-color-accent-soft: #073c74;
  --sl-color-accent-strong: #63b8ff;

  --sl-color-bg: #020617;
  --sl-color-surface: #0f172a;
  --sl-color-border: #1e293b;

  --sl-color-text-main: #e5e7eb;
  --sl-color-text-muted: #9ca3af;
  --sl-color-text-subtle: #64748b;

  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.4);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.5);
}

/* ===========================
   全体レイアウト
   =========================== */

html,
body {
  background-color: var(--sl-color-bg);
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans JP',
    'Hiragino Sans', 'Hiragino Kaku Gothic ProN', Meiryo, sans-serif;
  font-size: 16px;
  line-height: 1.8;
  color: var(--sl-color-text-main);
}

.sl-markdown-content {
  max-width: 760px;
  margin: 2.5rem auto;
  padding: 2.5rem 2.75rem;
  background-color: var(--sl-color-surface);
  border-radius: 18px;
  box-shadow: var(--shadow-sm);
}

/* ===========================
   見出し
   =========================== */

.sl-markdown-content h1 {
  font-size: 1.9rem !important;
  font-weight: 700;
  margin-bottom: 1.5rem;
}

.sl-markdown-content h2 {
  font-size: 1.3rem !important;
  font-weight: 600;
  margin-top: 2.25rem;
}
.sl-markdown-content h3 {
  font-size: 1.15rem !important;
}
.sl-markdown-content h4,
.sl-markdown-content h5,
.sl-markdown-content h6 {
  font-size: 1rem !important;
  color: var(--sl-color-text-muted);
}

/* ===========================
   コード
   =========================== */

code:not(pre code) {
  background-color: #f3f4f6;
  padding: 0.15em 0.45em;
  border-radius: 4px;
  border: 1px solid #e5e7eb;
}

pre {
  border-radius: 12px;
  border: 1px solid var(--sl-color-border);
  background-color: #0b1020;
  padding: 1rem 1.2rem;
  color: #e5e7eb;
  box-shadow: var(--shadow-sm);
}

.expressive-code .copy button {
  border-radius: 6px;
  transition: 0.15s ease;
}

/* ===========================
   テーブル
   =========================== */

table {
  width: 100%;
  border-collapse: collapse;  /* 罫線を1本にまとめる */
  margin: 1.8rem 0;
  border: none;              /* 外枠の線をなくす */
  border-radius: 0;          /* 角丸もなくす */
  overflow: visible;
}

/* ヘッダーセル */
table thead th {
  background-color: var(--sl-color-accent-soft);
  color: var(--sl-color-accent-strong);
  font-weight: 600;
}

/* セル共通 */
table th,
table td {
  padding: 0.9rem 1rem !important;    /* !importantで「文字が端ギリギリ」を解消 */
  text-align: left;
  border-bottom: 1px solid var(--sl-color-border);  /* 行ごとの下線だけにする */
}

/* 最終行だけ下線を消したい場合（好みで） */
table tr:last-child th,
table tr:last-child td {
  border-bottom: none;
}

/* ===========================
   リンク
   =========================== */

.sl-markdown-content a {
  color: var(--sl-color-accent);
  border-bottom: 1px solid transparent;
  transition: 0.15s ease;
}

.sl-markdown-content a:hover {
  color: var(--sl-color-accent-strong);
  border-bottom-color: var(--sl-color-accent);
}

/* ===========================
   引用
   =========================== */

blockquote {
  margin: 1.5rem 0;
  padding: 0.8rem 1.2rem 0.8rem 1.4rem;
  border-left: 4px solid var(--sl-color-accent);
  background: none;                   /* 背景色なし */
  color: var(--sl-color-text-main);
  font-size: 1.05rem;                 /* 少しだけ大きく */
  line-height: 1.7;
}

/* 引用内の段落が詰まらないように */
blockquote p {
  margin: 0.5rem 0;
}

/* ===========================
   アドモニション (:::note, :::caution, :::danger)
   =========================== */

/* 基本スタイル */
.starlight-aside {
  padding: 1.25rem 1.5rem;
  border-left-width: 5px;
  border-left-style: solid;
  margin: 1.5rem 0;
  box-shadow: var(--shadow-sm);
}

.starlight-aside__title {
  font-weight: 700;
  font-size: 0.95rem;
  margin-bottom: 0.75rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.starlight-aside__content > :first-child {
  margin-top: 0;
}

.starlight-aside__content > :last-child {
  margin-bottom: 0;
}

/* ===========================
   情報 (:::note または :::note[info])
   青色系
   =========================== */
.starlight-aside--note {
  background-color: rgba(59, 130, 246, 0.08);
  border-left-color: #3b82f6;
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-left-width: 5px;
}

.starlight-aside--note .starlight-aside__title {
  color: #2563eb;
}

:root[data-theme='dark'] .starlight-aside--note {
  background-color: rgba(59, 130, 246, 0.12);
  border-color: rgba(59, 130, 246, 0.3);
}

:root[data-theme='dark'] .starlight-aside--note .starlight-aside__title {
  color: #60a5fa;
}

/* ===========================
   警告 (:::caution または :::note[warn])
   黄色系
   =========================== */
.starlight-aside--caution {
  background-color: rgba(234, 179, 8, 0.08);
  border-left-color: #eab308;
  border: 1px solid rgba(234, 179, 8, 0.2);
  border-left-width: 5px;
}

.starlight-aside--caution .starlight-aside__title {
  color: #ca8a04;
}

:root[data-theme='dark'] .starlight-aside--caution {
  background-color: rgba(234, 179, 8, 0.12);
  border-color: rgba(234, 179, 8, 0.3);
}

:root[data-theme='dark'] .starlight-aside--caution .starlight-aside__title {
  color: #fbbf24;
}

/* ===========================
   より強い警告 (:::danger または :::note[alert])
   赤色系
   =========================== */
.starlight-aside--danger {
  background-color: rgba(239, 68, 68, 0.08);
  border-left-color: #ef4444;
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-left-width: 5px;
}

.starlight-aside--danger .starlight-aside__title {
  color: #dc2626;
}

:root[data-theme='dark'] .starlight-aside--danger {
  background-color: rgba(239, 68, 68, 0.12);
  border-color: rgba(239, 68, 68, 0.3);
}

:root[data-theme='dark'] .starlight-aside--danger .starlight-aside__title {
  color: #f87171;
}

/* ===========================
   ヒント (:::tip)
   緑色系（オプション）
   =========================== */
.starlight-aside--tip {
  background-color: rgba(34, 197, 94, 0.08);
  border-left-color: #22c55e;
  border: 1px solid rgba(34, 197, 94, 0.2);
  border-left-width: 5px;
}

.starlight-aside--tip .starlight-aside__title {
  color: #16a34a;
}

:root[data-theme='dark'] .starlight-aside--tip {
  background-color: rgba(34, 197, 94, 0.12);
  border-color: rgba(34, 197, 94, 0.3);
}

:root[data-theme='dark'] .starlight-aside--tip .starlight-aside__title {
  color: #4ade80;
}

/* ===========================
   画像
   =========================== */

.sl-markdown-content img {
  border-radius: 12px;
  box-shadow: var(--shadow-md);
  margin: 1.8rem 0;
  max-width: 100%;
}

/* ===========================
   ヘッダー
   =========================== */

/* サイトタイトルを黒に */
header .site-title,
header .site-title a {
  color: var(--sl-color-text-main) !important;
}

/* GitHubアイコンを黒に */
header .social-icons a {
  color: var(--sl-color-text-main) !important;
}

header .social-icons a:hover {
  color: var(--sl-color-accent) !important;
}

/* ===========================
   サイドバー（左）
   =========================== */

.sidebar > ul > li > a,
.sidebar > ul > li > details > summary {
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  color: var(--sl-color-text-main);
}

.sidebar > ul > li > a:hover {
  background-color: var(--sl-color-accent-soft);
  color: var(--sl-color-accent-strong);
}

.sidebar a[aria-current='page'] {
  background-color: var(--sl-color-accent-soft);
  color: var(--sl-color-accent-strong);
  font-weight: 600;
}

.sidebar ul ul > li > a {
  padding-left: 1.6rem;
  color: var(--sl-color-text-muted);
}

.sidebar ul ul > li > a:hover {
  background-color: var(--sl-color-accent-soft);
  color: var(--sl-color-accent-strong);
}

/* ===========================
   右サイドバー TOC
   =========================== */

/* スムーススクロールを有効化 */
html {
  scroll-behavior: smooth;
}

/* 右サイドバーの基本スタイル */
.right-sidebar {
  position: sticky !important;
  top: var(--sl-nav-height);
  height: calc(100vh - var(--sl-nav-height));
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--sl-color-border) transparent;
}

/* スクロールバーのカスタマイズ（Webkit） */
.right-sidebar::-webkit-scrollbar {
  width: 6px;
}

.right-sidebar::-webkit-scrollbar-track {
  background: transparent;
}

.right-sidebar::-webkit-scrollbar-thumb {
  background-color: var(--sl-color-border);
  border-radius: 3px;
}

.right-sidebar::-webkit-scrollbar-thumb:hover {
  background-color: var(--sl-color-accent);
}

/* TOCタイトルのスタイル */
.right-sidebar h2 {
  color: var(--sl-color-text-main) !important;
  font-size: 0.875rem !important;
  font-weight: 700 !important;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 1rem !important;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid var(--sl-color-border);
}

/* TOCリンクの基本スタイル */
.right-sidebar a {
  display: block;
  border-left: 3px solid transparent;
  padding: 0.5rem 0.75rem;
  margin: 0.25rem 0;
  color: var(--sl-color-text-muted);
  font-size: 0.875rem;
  line-height: 1.5;
  text-decoration: none;
  border-radius: 0 6px 6px 0;
  transition: all 0.2s ease;
}

/* TOCリンクのホバー状態 */
.right-sidebar a:hover {
  background-color: var(--sl-color-accent-soft);
  color: var(--sl-color-accent-strong);
}

/* 現在位置のハイライト（aria-current="true"） */
.right-sidebar a[aria-current='true'] {
  border-left-color: var(--sl-color-accent);
  color: var(--sl-color-accent-strong);
  background-color: var(--sl-color-accent-soft);
  font-weight: 600;
}

/* h3リンクのインデント */
.right-sidebar ul ul a {
  padding-left: 1.5rem;
  font-size: 0.8125rem;
}

/* リストのスタイル */
.right-sidebar ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.right-sidebar li {
  margin: 0;
}

/* 「概要」リンク（ページタイトルへのリンク）を非表示 */
.right-sidebar a[href='#_top'] {
  display: none;
}

/* ===========================
   投稿日・更新日の表示
   =========================== */

/* タイトル下に表示されるので、フッターの最終更新日は非表示 */
footer .meta p:has(time) {
  display: none;
}

/* モバイル版TOC（上部固定） */
@media (max-width: 71.9rem) {
  .right-sidebar-container {
    display: none;
  }

  /* モバイル版TOCのカスタマイズ */
  mobile-starlight-toc nav {
    background-color: var(--sl-color-surface);
    border-top-color: var(--sl-color-border);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  }

  mobile-starlight-toc summary {
    border-bottom-color: var(--sl-color-border);
  }

  mobile-starlight-toc .toggle {
    background-color: var(--sl-color-accent-soft);
    border-color: var(--sl-color-accent);
    color: var(--sl-color-accent-strong);
  }

  mobile-starlight-toc details[open] .toggle {
    background-color: var(--sl-color-accent);
    color: white;
  }

  mobile-starlight-toc .dropdown {
    background-color: var(--sl-color-surface);
    border-color: var(--sl-color-border);
  }

  /* モバイル版TOCリンクのスタイル */
  mobile-starlight-toc a {
    color: var(--sl-color-text-main) !important;
    transition: background-color 0.15s ease;
  }

  mobile-starlight-toc a:hover {
    background-color: var(--sl-color-accent-soft) !important;
  }

  mobile-starlight-toc a[aria-current='true'] {
    color: var(--sl-color-accent-strong) !important;
    background-color: var(--sl-color-accent-soft) !important;
    font-weight: 600;
  }

  /* モバイル版TOCでも「概要」リンクを非表示 */
  mobile-starlight-toc a[href='#_top'] {
    display: none;
  }
}

/* デスクトップ版TOC */
@media (min-width: 72rem) {
  .right-sidebar {
    padding: 1.5rem 1rem;
  }
}

/* ダークモード対応 */
:root[data-theme='dark'] .right-sidebar h2 {
  color: var(--sl-color-text-main) !important;
  border-bottom-color: var(--sl-color-border);
}

:root[data-theme='dark'] .right-sidebar a {
  color: var(--sl-color-text-muted);
}

:root[data-theme='dark'] .right-sidebar a:hover {
  color: var(--sl-color-accent-strong);
  background-color: var(--sl-color-accent-soft);
}

:root[data-theme='dark'] .right-sidebar a[aria-current='true'] {
  color: var(--sl-color-accent-strong);
  background-color: var(--sl-color-accent-soft);
}

/* ダークモード - モバイル版TOC */
@media (max-width: 71.9rem) {
  :root[data-theme='dark'] mobile-starlight-toc nav {
    background-color: var(--sl-color-surface);
    border-top-color: var(--sl-color-border);
  }

  :root[data-theme='dark'] mobile-starlight-toc .toggle {
    background-color: var(--sl-color-accent-soft);
    color: var(--sl-color-accent-strong);
  }

  :root[data-theme='dark'] mobile-starlight-toc details[open] .toggle {
    background-color: var(--sl-color-accent);
    color: white;
  }

  :root[data-theme='dark'] mobile-starlight-toc .dropdown {
    background-color: var(--sl-color-surface);
    border-color: var(--sl-color-border);
  }
}
